# Maintainer: DopustimVladimir <dopustimvladimir@gmail.com>
pkgname=unityhub
pkgver=3.0.0
pkgrel=2
pkgdesc='Manage Unity projects and Editor installations with Unity Hub'
url='https://unity.com/'
arch=('x86_64')
license=('custom')
depends=('zlib')
options=(!strip)
source=(
  "$pkgname-$pkgver.deb::https://hub.unity3d.com/linux/repos/deb/pool/main/u/unity/unityhub_amd64/unityhub-amd64-3.0.0.deb"
  "$pkgname.desktop"
  "$pkgname.svg"
)
sha256sums=(
  'c358dbbe590a2777719686a26494fee8b55bbcec8a0f4378dccb50715f2a7fde'
  'bb5a658c2e6ef1a9d8a56f552190027275d47bb1de31ed116ee580b373619a96'
  'ccc9fc1afa09558a733f1109bfdad48e6e1f77f8110c625ad7b0ee02407070d3'
)

package() {
  tar -xjf 'data.tar.bz2'
  install -m 755 -d "$pkgdir/opt/$pkgname"
  cp -r --no-preserve=ownership --preserve=mode "$srcdir/opt/unityhub/"* \
    "$pkgdir/opt/$pkgname"
  install -m 644 -D "$srcdir/opt/unityhub/resources/hub-license.txt" \
    "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
  install -m 644 -D "$srcdir/$pkgname.desktop" \
    "$pkgdir/usr/share/applications/$pkgname.desktop"
  install -m 644 -D "$srcdir/$pkgname.svg" \
    "$pkgdir/usr/share/icons/hicolor/scalable/apps/$pkgname.svg"
  xdg-mime default "$pkgname.desktop" 'x-scheme-handler/unityhub'
}
